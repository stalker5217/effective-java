## 가능한 실패를 원자적으로 만들라  

메서드가 실패하더라도 객체가 메서드 호출 전 상태를 유지하게 함으로써, 
에러가 발생하더라도 객체를 계속 사용하게 할 수 있다.  

즉, 메서드가 실패에 대해 원자적으로 만드는 것이 좋다. 
하지만 모든 경우 이를 수행할 수 있는 것은 아니다. 
이를 구현하기 위한 비용이 매우 큰 경우도 있으며 특정한 상황에서의 예외, 예를 들면 두 스레드가 동시에 하나의 객체에 동기화 없이 접근하여 발생한 예외 같은 경우 그 객체는 이미 일관성을 잃었다고 볼 수 있기 때문이다. 

1. 작업 수행에 앞서 매개변수의 유효성을 검사한다.  
   
	``` java
	public Object pop(){
		if(size == 0) throw new EmptyStackException();
		
		Object result = elements[--size];
		elements[size] = null;
		return result;
	}
	```

2. 실패 가능성이 있는 코드를 앞에 배치하고, 객체의 상태를 변경하는 코드를 뒤에 배치한다.
3. 변경을 객체의 copy에서 작업하고 성공하면 원본에 덮어쓴다.
4. 작업에서 실패가 발생하면 해당 실패에 대한 복구 코드를 통해 이전 상태로 되돌린다. 

